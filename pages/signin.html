<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Renturn - Login</title>
  <link rel="stylesheet" href="../css/signin.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="icon" href="../photos/Image.png" type="image.png">
</head>
<body>
    <main class="main-container">
    <div class="logo-bg">
      <img src="../photos/Image.png" alt="big-logo">
    </div>
    <div class="form-container">
        <h2>Welcome Back</h2>
        <p class="subtitle">Sign in to your account</p>
        
        <form id="loginForm" novalidate>
            <div class="input-group">
                <label>Email Address</label>
                <input type="text" id="email" placeholder="Enter your email">
                <i class="fa-solid fa-envelope"></i>
                <small class="error-message"></small>
            </div>
            
            <div class="input-group">
                <label>National ID</label>
                <input type="text" id="nationalID" placeholder="Enter your National ID">
                <i class="fa-solid fa-id-card"></i>
                <small class="error-message"></small>
            </div>
            <div class="input-group">
                <label>Password</label>
                <input type="password" id="password" placeholder="Enter your Password">
                <i class="fa-solid fa-lock"></i>
                <i class="fa fa-eye"></i>
                <small class="error-message"></small>
            </div>
            
            <div class="form-options">
                <label class="remember">
                    <input type="checkbox" id="remember"> Remember me
                </label>
                <a href="./forgetpass.html" class="forgot-link">Forgot Password?</a>
            </div>
            <div id="forgotModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <p class="modal-subtitle">"Enter your registered email, and we’ll send you a reset link."</p>
                    <div class="input-group">
                        <label>Email Address</label>
                        <div class="input-box">
                            <i class="fa-solid fa-envelope"></i>
                            <input type="email" placeholder="Enter your email" required>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button class="btn-primary">Send reset link</button>
                        <button class="btn-secondary" id="cancelBtn">Cancel</button>
                    </div>
                </div>
                <!-- OTP Modal -->
<div id="otpModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>OTP</h2>
    <p class="modal-subtitle">Please check your email and enter the OTP code</p>
    <div class="input-group">
      <label>Enter OTP</label>
      <div class="input-box">
        <i class="fa-solid fa-key"></i>
        <input type="text" placeholder="Enter OTP" maxlength="6" required>
      </div>
    </div>
    <div class="modal-buttons">
      <button class="btn-primary" id="verifyOtpBtn">Verify</button>
      <button class="btn-secondary" id="cancelOtpBtn">Cancel</button>
    </div>
  </div>
</div>
            </div>
            <button id="signin" type="submit" class="btn" onclick="window.location.href='../index.html'">Sign In</button>
            <p class="signup">Don’t have an account? <a href="./signup.html">Sign up</a></p>
        </form>
    </div>
</main>
  <script src="../js/errors.js"></script>
  <script>
    document.getElementById("signin").addEventListener("submit", async function(e) {
  e.preventDefault();

  const formData = new FormData(this);
  const data = Object.fromEntries(formData.entries());

  try {
    const response = await fetch("https://renturn.vercel.app/api/v1/auth/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)  
    });

    const result = await response.json();
    console.log(result);

    if (response.ok) {
      alert("✅ Signin successfully!");
    } else {
      alert("❌ Error: " + (result.message || "Something went wrong"));
    }

  } catch (error) {
    console.error("Error:", error);
    alert("⚠️ Network error, please try again later.");
  }
});

  </script>
</body>
</html>

